<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>chart</title>
        
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>
            $.getJSON('http://34.64.175.201:3000/temp1'
                 ,function(data){
                     var $dd = data.rowz.length-1
                     var $date = data.rowz[$dd].date1
                     
                     var qq = [];
                     var ww = [];
                     var ee = [];
                     var rr = [];
                     
                     for(var i =0; i<$dd+1; i++){
                         qq.push([
                             Number(data.rowz[i].temp)
                         ])
                     }
                     for(var i =0; i<$dd+1; i++){
                         ww.push([
                             Number(data.rowz[i].hum)
                         ])
                     }
                     for(var i =0; i<$dd+1; i++){
                         ee.push([
                             Number(data.rowz[i].soiltemp)
                         ])
                     }
                     for(var i =0; i<$dd+1; i++){
                         rr.push([
                             Number(data.rowz[i].soilhum)
                         ])
                     }

            $(function () {
              
               $('#chart1').highcharts({
                   title: {
                        text: 'Section1',
                        x: -20 //center
                   },
                   subtitle:{
                       text: $date,
                       x:-20

                   },
               
                   xAxis: {  //x축
                    categories: ['00:00','01:00', '02:00','03:00', '04:00','05:00', '06:00','07:00', '08:00','09:00', '10:00','11:00', '12:00',
                    '13:00', '14:00','15:00', '16:00','17:00', '18:00','19:00', '20:00','21:00', '22:00','23:00']
                    },
                   yAxis: {  //y축
                    title: {
                        text: '단위 (°C)'
                    },
                    plotLines: [{   //선
                        value: 0,
                        width: 1,
                        color: '#808080'
                    }]
                    },
                    
                    legend: {  
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle',
                        borderWidth: 0
                    },
                    series: [{   
                        name: 'temp',
                        data: qq
                    }, {
                        name: 'hum',
                        data: ww
                    },{
                        name: 'soiltemp',
                        data: ee
                    }, {
                        name: 'sun',
                        data: rr
                    }]
            });
            });
                                                });
        </script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery.min.js"></script>
<script>
    $.getJSON('http://34.64.175.201:3000/temp1'
         ,function(data){
            var $dd1 = data.rowz.length-1
            var $date1 = data.rowz[$dd1].date1
                     
                     var qq1 = [];
                     var ww1 = [];
                     var ee1 = [];
                     var rr1 = [];
                     
                     for(var i =0; i<$dd1+1; i++){
                         qq.push([
                             Number(data.rowz[i].temp)
                         ])
                     }
                     for(var i =0; i<$dd1+1; i++){
                         ww.push([
                             Number(data.rowz[i].hum)
                         ])
                     }
                     for(var i =0; i<$dd1+1; i++){
                         ee.push([
                             Number(data.rowz[i].soiltemp)
                         ])
                     }
                     for(var i =0; i<$dd1+1; i++){
                         rr.push([
                             Number(data.rowz[i].soilhum)
                         ])
                     }



         })




</script>
        <script src="../code/highcharts.js"></script>
        <script src="../code/modules/exporting.js"></script> 
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="js/scripts.js"></script>  
        <link href="css/styles.css" rel="stylesheet">     
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/js/all.min.js" crossorigin="anonymous"></script> 
<script src="//cdn.datatables.net/1.10.10/js/jquery.dataTables.min.js"></script>
<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.10/css/jquery.dataTables.min.css">
<script>
    $(function(){
        $("#tablesort").dataTable();
    });
</script>
  </head>
  <body class="sb-nav-fixed">
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
        <a class="navbar-brand" href="main">Smart Farm</a>
        <button class="btn btn-link btn-sm order-1 order-lg-0" id="sidebarToggle" href="#"><i class="fas fa-bars"></i></button>

       
    </nav>
    <div id="layoutSidenav">
        <div id="layoutSidenav_nav">
            <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                <div class="sb-sidenav-menu">
                    <div class="nav">
                        <div class="sb-sidenav-menu-heading">Core</div>
                        <a class="nav-link" href="main">
                            <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                            Dashboard
                        </a>
                        
                        <div class="sb-sidenav-menu-heading">Addons</div>
                        <a class="nav-link" href="charts">
                            <div class="sb-nav-link-icon"><i class="fas fa-chart-area"></i></div>
                           Chart
                        </a>
                        <a class="nav-link" href="section1chart">
                            <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                            Section1
                        </a>
                        <a class="nav-link" href="#">
                            <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                            Section2
                        </a>
                        <a class="nav-link" href="#" target="_blank">
                            <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                            Section3
                        </a>
                        <a class="nav-link" href="#" target="_blank">
                            <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                            Section4
                        </a>
                    </div>
                </div>
            </nav>
        </div>
        <div id="layoutSidenav_content">
            <main>
                <div class="container-fluid">
              
    
    <div id="chart1" style="width: 100%; height: 350px; float: left;border-radius: 15px; margin-bottom: 20px;"></div>
   <div style="width: 100%; height: 400;">
    <table id="tablesort">
                                 <thead style="text-align: center;">
                                          <tr>
                                            <th>temp</th>
                                            <th>hum</th>
                                            <th>soiltemp</th>
                                            <th>soilhum</th>
                                            <th>date</th>
                                          </tr>
                                        </thead>
                                        <tbody>
                                            <%
                                            for(var i=0; i<results.length; i++)
                                            {
                                                var data = results[i];
                                            %>
                                            <tr>
                                                <td style="text-align: center;"><%=data.temp%></td>
                                                <td style="text-align: center;"><%=data.hum%></td>
                                                <td style="text-align: center;"><%=data.soiltemp%></td>
                                                <td style="text-align: center;"><%=data.soilhum%></td>
                                                <td style="text-align: center;"><%=data.date2%></td>
                                            </tr>
                                            <%}
                                            %>
                                
                                        </tbody>

                                      </table>   
</div>
</div>
</main>
</div>
  </body>
 

</html>